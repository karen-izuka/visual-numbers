<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>doodles | visual numbers</title>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/atom-one-dark.min.css">
  <link rel="stylesheet" href="/../style.css">
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <header>
    <div class="page-header-title">
      <img class="page-header-image" src="/assets/images/header-image.png">
      <div class="page-header-text"><a href="/">Visual Numbers</a></div>
    </div>
    <div>
      <ul class="list-nav">
        <li>
          <a href="/diary/">back to diary</a>
        </li>
        <li>
          <a href="/diary/entry-01/">next entry</a>
        </li>
      </ul>
    </div>
  </header>
  <div class="container">
    <h1>Transform = My Favorite Pandas Function</h1>
    <div class="code">
      <pre><code class="python">
      import pandas as pd
      
      df = pd.read_csv('sales_by_customer.csv')
      df['sales_by_country'] = df.groupby(['country'])['sales'].transform('sum')
      df['sales_pct'] = df['sales'] / df['sales_by_country']
      </code></pre>
    </div>
    <div>
      <p>Oftentimes I find myself needing a column calculated at a more summarized level than the current dataframe I am working in. For example, I may have a table of sales by customer, but require a column that aggregates all of the sales at a higher level such as country. In the traditional SQL world, this would require creating another dataframe that sums sales by country only to join it back to the original dataframe. How annoying! Enter transform! This function allows the user to calculate values at the desired level of granularity all within the given dataframe! This is great for homebodies like me that don't like to leave their apartments, or their dataframes.</p>
      <br>
      <p>I often use this function to answer questions such as: (1) What is a product's revenue contribution to the overall company? (2) What percentage of 2020 sales happened in February? (3) How does a certain customer's price point for a given product compare to the average price point across all customers?</p>
    </div>
  </div>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>